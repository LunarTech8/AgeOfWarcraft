package Command_UnitTests
import ConstantData
import UnitMap
import Entity
import Stock
import StorageSystem
import BuildingSystem
import WorkshopSystem
import PersonSystem
import SettlementSystem
import Array
import Array2D


// --------------------
// Data code
// --------------------

let COMMAND = "unit test"
let COMMAND_SHORT = "ut"


// --------------------
// Functional code
// --------------------

function executeCommand()
	print("-------- Unit tests (16):")
	// Array:
	testArray_SetAndGet(true)
	// testArray_CreateAndDestroy(true)  // FIXME: seems to stop on this ingame, maybe forceComputationBreak() are required
	// Array2D:
	testArray2D_SetAndGet(true)
	// testArray2D_CreateAndDestroy(true)  // FIXME: seems to stop on this ingame, maybe forceComputationBreak() are required
	// UnitMap:
	testUnitHashMap_AddAndRemove(true)
	// EntityMap:
	testEntity_CreateAndIndex(true)
	testEntity_HashMapAddAndRemove(true)
	// StockSystem:
	testStockSystem_AddAndRemove(true)
	// StorageSystem:
	testStorageSystem_AddAndRemove(true)
	// PersonSystem:
	testPersonSystem_StatsAndBuildings()  // FIXME: nullpointer error for Home.isInhabitant()
	testPersonSystem_LowerStatLimits(vec2(-384., 0.))
	testPersonSystem_DamageReaction(vec2(0., 384.))
	// BuildingSystem:
	testBuildingSystem_Build(vec2(896., -2816.))
	// SettlementSystem:
	testSettlementSystem_Build(vec2(-1536., -2560.))
	// WorkshopSystem:
	testWorkshopSystem_Workers(vec2(0., -384.))
	testWorkshopSystem_Production(vec2(0., 0.))

init
	CreateTrigger()
	..addAction(function executeCommand)
	..registerPlayerChatEvent(Settings.USER_PLAYER, COMMAND, true)
	..registerPlayerChatEvent(Settings.USER_PLAYER, COMMAND_SHORT, true)